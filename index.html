<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Local Transparency Booster | LTB</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/awesomplete.css">
    <script type="text/javascript" src="js/jquery-1.10.2.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/js/bootstrap.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="shortcut icon" href="css/logo16.jpg">
    <link rel="apple-touch-icon-precomposed" sizes="256x256" href="images/logo256.jpg">
    <script src="js/jszip-utils.min.js"></script>
    <script src="js/docxtemplater-latest.min.js"></script>
    <script src="js/FileSaver.min.js"></script>
    <script src="js/awesomplete.min.js"></script>
    <script>
    var podaci;
    var lista;

    var izabrani; // na osnovu kojeg se generise sve

    var dokumenta = {
        "informator": "Informator o radu",
        "statut": "Statut",
        "budzet": "Odluka o budžetu",
        "budzetizvestaj": "Izveštaj o izvršenju budžeta",
        "nabavke": "Plan javnih nabavki",
        "nabavkeizvestaj": "Izveštaj o javnim nabavkama",
        "finansijskiizvestaj": "Finansijski izveštaj",
        "driizvestaj": "Izveštaj Državne revizorske institucije",
        "urbanistickiplan": "Prostorni plan",
        "mladiplan": "Lokalni akcioni plan za mlade",
        "slor": "Strategija lokalnog održivog razvoja",
        "leap": "Lokalni ekološki akcioni plan",
        "sler": "Strategija lokalnog ekonomskog razvoja"
    };

    //https://github.com/open-xml-templating/docxtemplater

    function uradi(params) {
        //izabrani + vrednost select boxa
        
        var tempString = izabrani.opstina + ", " + izabrani.adresa + ", " + izabrani.telefon;

        var dateObj = new Date();
        var month = dateObj.getUTCMonth() + 1; //months from 1-12
        var day = dateObj.getUTCDate();
        var year = dateObj.getUTCFullYear();

        params = params || {
            "opstinaSediste": tempString,
            "trazenaInformacija": $("#dokSelect").val(),
            "danIMesec": day + "."+month+".",
            "g": (year+"").slice(-1)
        };

        loadFile("docs/template1.docx", function(err, content) {
            if (err) {
                throw e
            };
            doc = new Docxgen(content);
            doc.setData(
                    params
                ) //set the templateVariables
            doc.render()
            out = doc.getZip().generate({
                    type: "blob"
                }) //Output the document using Data-URI
            saveAs(out, "zahtev.docx")
        })
    }
    var loadFile = function(url, callback) {
        JSZipUtils.getBinaryContent(url, callback);
    }
    </script>
    <script>
    $(document).ready(function() { 
        $('a[href*=#]').each(function() {  
            if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '')   && location.hostname == this.hostname   && this.hash.replace(/#/, '')) {   
                var $targetId = $(this.hash),
                    $targetAnchor = $('[name=' + this.hash.slice(1) + ']');   
                var $target = $targetId.length ? $targetId : $targetAnchor.length ? $targetAnchor : false;    
                if ($target) {     
                    var targetOffset = $target.offset().top;


                         
                    $(this).click(function() {
                        $("#nav li a").removeClass("active");
                        $(this).addClass('active');      
                        $('html, body').animate({
                            scrollTop: targetOffset
                        }, 1000);      
                        return false;     
                    });   
                }  
            } 
        });

    });
    </script>
</head>

<body>
    <header id="header">
        <div class="content">
            <div id="logo">
                <a href="index.html#top">
                    <img src="css/logo48.png" alt="">
                </a>
            </div>
            <nav id="nav">
                <ul>
                    <li>Proverite:</li>
                    <li><a href="#slide3" class="active" title="Next Section"> Informator</a></li>
                    <li><a href="#slide7" title="Next Section">Budžet</a></li>
                    <li><a href="#slide9" title="Next Section">Javne nabavke, državna pomoć</a></li>
                    <li><a href="#slide13" title="Next Section">Usluge</a></li>
                    <li><a href="about.html" title="Next Section">O projektu</a></li>
                </ul>
            </nav>
        </div>
    </header>
    <div id="slide1" class="slide slide-img">
        <div id="logoTraka"> </div>
    </div>
    <div id="slide2" class="slide slide-txt">
        <div class="content">
            <div class="quotes_container">
                <h3 class="quotes">Pravo i interes javnosti da zna uređeni su Zakonom o slobodnom pristupu informacijama od javnog značaja. Ovaj zakon nudi definiciju informacije od javnog značaja. </h3>
                <!-- <img src="img/dr-seuss.png" align="left" />
               <h4 class="author_name_gray">Dr. Seuss </h4>  -->
            </div>
        </div>
    </div>
    <div id="slide3" class="slide slide-img">
        <div class="content">
            <a target="_blank" href="">
                <div class="krug"> Pregled opštinskih informatora o radu </div>
            </a>
        </div>
    </div>
    <div id="slide4" class="slide slide-txt">
        <div class="content">
            <div class="quotes_container">
                <h3 class="quotes">Zakon predviđa da svaki organ javne vlasti najređe jednom godišnje objavljuje, odnosno ažurira Informator o radu. 
                <br/>
                <br/>
                Informator o radu je dokument koji sadrži osnovne podatke o radu organa javne vlasti, opis pravila u vezi sa javnošću rada, spisak najčešće traženih informacija od javnog značaja, opis nadležnosti, ovlašćenja i obaveza, usluge koje organ pruža zainteresovanim licima, podatke o prihodima i rashodima, podatke o javnim nabavkama, informacije o podnošenju zahteva za pristup informacijama. Ukoliko se informator redovno ažurira i ukoliko je on lako dostupan na veb prezentaciji državnog organa, podiže se transparentnost rada jedinice lokalne samouprave, a građanima se omogućava brz i jednostavan pristup potrebnoj.</h3>
            </div>
        </div>
    </div>
    <!--  <div id="slide5" class="slide slide-img">
       <div class="content">
           <h3></h3>
       </div>
   </div> -->
    <div id="slide6" class="slide slide-txt">
        <div class="content">
            <div class="quotes_container">
                <h3 class="quotes"><u>Detaljna analiza Informatora</u> o radu svih opština u Srbiji, pokazala je da samo jedna opština održava svoj informator u celosti se pridržavajući uputstva. Ostalim informatorima nedostaju određeni delovi i to veoma često informacije o budžetu. U više od 54% opština  građanima nisu dostupne informacije o budžetu.  </h3>
            </div>
        </div>
    </div>
    <div id="slide7" class="slide slide-img">
        <div class="content">
            <a target="_blank" href="http://test.bos.rs/pages/budzet.html">
                <div class="krug">Proverite dostupnost budžeta</div>
            </a>
        </div>
    </div>
    <div id="slide7a" class="slide slide-img">
        <div class="content">
            <a target="_blank" href="http://test.bos.rs/pages/budzet.html">
                <div class="krug">Proverite dostupnost budžeta</div>
            </a>
        </div>
    </div>
    <div id="slide8" class="slide">
        <div class="content">
            <div class="quotes_container">
                <h3 class="quotes">
            Još češće nedostaju informacije o javnim nabavkama koje objavljuje tek svaka četvrta opština. Osim njih, često nedostaju i podaci o pruženoj državnoj pomoći, odnosno raznim vidovima finansijske podrške javnim i ostalim preduzećima. Ove informacije su dostupne u oko 30% slučajeva.
            </h3>
            </div>
        </div>
    </div>
    <div id="slide9" class="slide slide-img">
        <div class="content">
            <a target="_blank" href="http://test.bos.rs/pages/nabavke.html">
                <div class="krug">Proverite informacije o javnim nabavkama</div>
            </a>
        </div>
    </div>
    <div id="slide9a" class="slide slide-img">
        <div class="content">
            <a target="_blank" href="http://test.bos.rs/pages/nabavke.html">
                <div class="krug">Proverite informacije o javnim nabavkama</div>
            </a>
        </div>
    </div>
    <div id="slide10" class="slide slide-txt">
        <div class="content">
            <div class="quotes_container">
                <h3 class="quotes">
            Osim toga što nedostatak ovih informacija navodi na možda pogrešan zaključak o umešanosti u korupciju ili o zloupotrebi položaja, on ukazuje na još nešto. Neobjavljivanjem informacija o javnim nabavkama organi vlasti krše ne samo Zakon o slobodnom pristupu informacija od javnog značaja već i Zakon o javnim nabavkama.
             </h3>
            </div>
        </div>
    </div>
    <div id="slide11" class="slide slide-img">
        <div class="content">
            <a target="_blank" href="">
                <div class="krug">Proverite informacije o državnoj pomoći </div>
            </a>
        </div>
    </div>
    <div id="slide11a" class="slide slide-img">
        <div class="content">
            <a target="_blank" href="">
                <div class="krug">Proverite informacije o državnoj pomoći </div>
            </a>
        </div>
    </div>
    <div id="slide12" class="slide slide-txt">
        <div class="content">
            <div class="quotes_container">
                <h3 class="quotes">
               Informator treba da sadrži i informacije o uslugama koje organ pruža zainteresovanim licima, kao i o postupku za pružanje te usluge. 
               <br>
               <br>
                Više od polovine informatora o radu opština u Srbiji nema podatke o, na primer, potrebnim dokumentima i uslovima za sticanje nekog socijalnog prava, ili o izdavanju uverenja o upisu u matičnu knjigu rođenih. Zato uvek može da „fali jedan papir“ .
              </h3>
            </div>
        </div>
    </div>
    <div id="slide13" class="slide slide-img">
        <div class="content">
            <a target="_blank" href="http://test.bos.rs/pages/usluge.html">
                <div class="krug"> Proverite informacije o uslugama </div>
            </a>
        </div>
    </div>
    <div id="slide13a" class="slide slide-img">
        <div class="content">
            <a target="_blank" href="http://test.bos.rs/pages/usluge.html">
                <div class="krug"> Proverite informacije o uslugama </div>
            </a>
        </div>
    </div>
    <div id="slide14" class="slide slide-txt">
        <div class="content">
            <div class="quotes_container">
                <h3 class="quotes">
            Osim analize informatora istraživanje je obuhvatilo i pregled dostupnosti drugih dokumenata među kojima su: statut opštine, urbanistički plan kao i druge strateške planove (Lokalna strategija održivog razvoja, Lokalna strategija ekonomskog razvoja, Lokalni akcioni plan za mlade, …) Pregled rezultata tog istraživanja, kao i pristup prikupljenim dokumentima omogućeni su putem Baze lokalne transparentnosti. 
              </h3>
            </div>
        </div>
    </div>
    <div id="slide15" class="slide slide-img">
        <div class="content">
            <a target="_blank" href="http://test.bos.rs/pages/stupci.html">
                <div class="krug"> Pogledajte bazu lokalne transparentnosti</div>
            </a>
        </div>
    </div>
    <div id="slide16" class="slide slide-txt">
        <div class="content">
            <h3>Lorem ipsum o podnošenju zahteva…. (na primer) Kao oblik reaktivne transparentnosti, ustanovljen je postupak podnošenja Zahteva za pristup informacijama. Zahtev za pristup informacijama od javnog značaja je format za pristup informacijama od javnog značaja na zahtev građana ili drugih organa. Postupak u vezi sa podnošenjem i realizacijom Zahteva za ostvarivanje prava na slobodan pristup informacijama od javnog značaja definisan je članovima 15 - 21 Zakona o slobodnom pristupu informacijama od javnog značaja. Četvrtina informatora ne sadrži potpunu informaciju o tome kako se podnosi zahtev za pristup informacijama od javnog značaja, što onemogućava lako dolaženje do informacije. Ako uzmem u obzir da velika većina tih informatora nema dostupne npr. planove javnih nabavki, to onda znači da se do tih informacija jako teško dolazi.</h3>
        </div>
    </div>
    <div id="slide17" class="slide slide-img">
        <div class="content">
            <p> Prema Zakonu o slobodnom pristupu informacijama od javnog značaja, imate pravo da zatražite informaciju od javnog značaja od organa javne vlasti, u ovom slučaju od bilo koje opštine. Vaše pravo možete ostvariti tako što ćete podneti zahtev za slobodan pristup informacijama od javnog značaja. U nastavku možete pogledati i preuzeti obrazac zahteva, kao i potrebne podatke za slanje zahteva poštom. </p>
            <div>
                <span>Opština
                    <input type="text" id="opstinaInput" name="opstina">
                </span>
                <br>
                <span id="dokSpan" class="hidden">Dokument
                    <select name="dokument" id="dokSelect" ></select>
                </span>
            </div>
            <img src="./img/zahtev1.png" alt="">
            <button id="zahtevBtn" class="hidden" onclick="uradi()">Preuzmite zahtev</button>
        </div>
    </div>
    <footer id="footer">
        <div class="container">
            <div class="row">
                <div>
                    <div class="pull-left" style="width:300px">
                        <img src="http://paketpomociocd.bos.rs/public/img/eu.jpg" border="0" align="left" height="80" class="margin-right">
                        <div class=" ">
                            Projekat finansira Evropska unija u okviru
                            <br> Programa "Podrška civilnom društvu".
                        </div>
                    </div>
                    <div class="pull-right">
                        <img src="http://paketpomociocd.bos.rs/public/img/srbija.jpg" border="0" height="80">
                    </div>
                    <div class="col-sm-6 col-md-offset-4">
                        &copy; 2015 <a target="_blank" href="http://www.bos.rs/" title="Beogradska otvorena Škola">BOŠ</a>. All Rights Reserved.
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <script>
    //https://leaverou.github.io/awesomplete/#download

    $.getJSON("resources/podaci.json")
        .done(function(data) {
            podaci = (data);

            lista = podaci.map(function(el) {
                    return el.opstina; //.toLowerCase();
                })
                //lista = JSON.parse(JSON.stringify(lista)); 

            var input = document.getElementById("opstinaInput");
            new Awesomplete(input, {
                list: lista
            })

            $("#opstinaInput").on("awesomplete-select", function(ev) {


                $("#dokSpan").removeClass('hidden');
                //ovde mi trebaju dokumenta koje imaju jedinice
                var unos = ev.originalEvent.text.toLowerCase();
                var opstinaParams = podaci.filter(function(el) {
                    return el.opstina.toLowerCase() == unos;
                })

                opstinaParams = opstinaParams[0];
                izabrani = opstinaParams;

                //filter te jedne opstine u potrazi za parametrima
                var nazivi = Object.keys(dokumenta);
                var interesantni = [];

                for (var i = 0, len = nazivi.length; i < len; i++) {
                    if (opstinaParams[nazivi[i]] <= 1)
                        interesantni.push(dokumenta[nazivi[i]]);
                }
                //console.log(interesantni);
                //padajuci meni od tih dokumenata

                var select = document.getElementById("dokSelect");

                var options = interesantni;

                $(select.childNodes).remove()

                for (var i = 0; i < options.length; i++) {
                    var opt = options[i];
                    var el = document.createElement("option");
                    el.textContent = opt;
                    el.value = opt;
                    select.appendChild(el);
                };

                $("#zahtevBtn").removeClass('hidden');

            });

        })
    </script>
</body>

</html>
